
---
title: "Flexible Epidemic Modeling with EpiBayes"
output: 
  github_document:
    fig_width: 10
    fig_height: 6
bibliography: inst/REFERENCES.bib
vignette: >
  %\VignetteIndexEntry{README}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

The EpiBayes package allows researchers to flexibly 
specify and fit Bayesian epidemiological models in the style of 
@Flaxman2020. The package leverages R's formula interface to paramaterize the time-varying reproduction rate 
in terms of arbitrary covariates. Multiple countries/states can be modelled simultaneously with 
multilevel models. The design of the package has been inspired by, and has borrowed from, the rstanarm
package [@rstanarm]. EpiBayes uses rstan [@rstan] as the backend for fitting models.
The primary model fitting function in EpiBayes is `epim`.

Please see [here](/vignettes/introduction.md) for a demonstration on how to use the package. 

# Example Usage

```{r, eval = T}
library(EpiBayes)
data(EuropeCovid)

# Collect args for epim
args <- EuropeCovid
args$formula <- R(country, date) ~  0 + schools_universities + self_isolating_if_ill +
  public_events + lockdown + social_distancing_encouraged
args$algorithm <- "sampling"
args$prior <- shifted_gamma(shape = 1/6, scale = 1, shift = -log(1.05)/6)
args$group_subset <- c("Germany", "United_Kingdom")

#sample
options(mc.cores=parallel::detectCores())
fit <- do.call("epim", args)

# Inspect Rt
plot_rt(fit, group = "United_Kingdom", levels = c(25,50,75,95))
# And deaths
plot_obs(fit, type = "deaths", group = "United_Kingdom", levels = c(25,50,75,95))
```

# References